<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1069px" preserveAspectRatio="none" style="width:1047px;height:1069px;background:#FFFFFF;" version="1.1" viewBox="0 0 1047 1069" width="1047px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="298" x="374.25" y="28.5352">Family Service - Create Family Operation</text><rect fill="#FFFFFF" height="692.7637" style="stroke:#181818;stroke-width:1.0;" width="10" x="180" y="150.2871"/><rect fill="#FFFFFF" height="583.5215" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="230.2188"/><rect fill="#FFFFFF" height="474.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="565" y="310.1504"/><rect fill="#FFFFFF" height="79.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="721.5" y="390.082"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="721.5" y="499.3242"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="721.5" y="725.8086"/><rect fill="#FFFFFF" height="138.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="864" y="557.9453"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003" y="637.877"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="118.9766" y2="988.2246"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="185" x2="185" y1="118.9766" y2="988.2246"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="357" x2="357" y1="118.9766" y2="988.2246"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="569.5" x2="569.5" y1="118.9766" y2="988.2246"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="726.5" x2="726.5" y1="118.9766" y2="988.2246"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="868.5" x2="868.5" y1="118.9766" y2="988.2246"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1007.5" x2="1007.5" y1="118.9766" y2="988.2246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="5" y="116.0234">API Client</text><ellipse cx="41" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41,58.9883 L41,85.9883 M28,66.9883 L54,66.9883 M41,85.9883 L28,100.9883 M41,85.9883 L54,100.9883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="5" y="1000.7598">API Client</text><ellipse cx="41" cy="1012.2129" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41,1020.2129 L41,1047.2129 M28,1028.2129 L54,1028.2129 M41,1047.2129 L28,1062.2129 M41,1047.2129 L54,1062.2129 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="117" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="124" y="108.0234">GraphQL Resolver</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="117" y="987.2246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="124" y="1007.7598">GraphQL Resolver</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="265" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="272" y="108.0234">FamilyApplicationService</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="265" y="987.2246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="272" y="1007.7598">FamilyApplicationService</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159" x="490.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="497.5" y="108.0234">FamilyDomainService</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159" x="490.5" y="987.2246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="497.5" y="1007.7598">FamilyDomainService</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="659.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="666.5" y="108.0234">Family Aggregate</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="659.5" y="987.2246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="666.5" y="1007.7598">Family Aggregate</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="803.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="810.5" y="108.0234">FamilyRepository</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="803.5" y="987.2246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="810.5" y="1007.7598">FamilyRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="973.5" y="116.0234">Database</text><path d="M990,66.4883 C990,56.4883 1008,56.4883 1008,56.4883 C1008,56.4883 1026,56.4883 1026,66.4883 L1026,92.4883 C1026,102.4883 1008,102.4883 1008,102.4883 C1008,102.4883 990,102.4883 990,92.4883 L990,66.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M990,66.4883 C990,76.4883 1008,76.4883 1008,76.4883 C1008,76.4883 1026,76.4883 1026,66.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="973.5" y="1000.7598">Database</text><path d="M990,1013.7129 C990,1003.7129 1008,1003.7129 1008,1003.7129 C1008,1003.7129 1026,1003.7129 1026,1013.7129 L1026,1039.7129 C1026,1049.7129 1008,1049.7129 1008,1049.7129 C1008,1049.7129 990,1049.7129 990,1039.7129 L990,1013.7129 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M990,1013.7129 C990,1023.7129 1008,1023.7129 1008,1023.7129 C1008,1023.7129 1026,1023.7129 1026,1013.7129 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="692.7637" style="stroke:#181818;stroke-width:1.0;" width="10" x="180" y="150.2871"/><rect fill="#FFFFFF" height="583.5215" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="230.2188"/><rect fill="#FFFFFF" height="474.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="565" y="310.1504"/><rect fill="#FFFFFF" height="79.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="721.5" y="390.082"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="721.5" y="499.3242"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="721.5" y="725.8086"/><rect fill="#FFFFFF" height="138.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="864" y="557.9453"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003" y="637.877"/><polygon fill="#000000" points="168,146.2871,178,150.2871,168,154.2871,172,150.2871" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="41" x2="174" y1="150.2871" y2="150.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="48" y="145.5449">createFamily(input)</text><path d="M195,163.2871 L195,203.2871 L444,203.2871 L444,173.2871 L434,163.2871 L195,163.2871 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M434,163.2871 L434,173.2871 L444,173.2871 L434,163.2871 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="201" y="180.8555">GraphQL mutation to create a family</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="201" y="196.166">with parents and children</text><polygon fill="#000000" points="340,226.2188,350,230.2188,340,234.2188,344,230.2188" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="190" x2="346" y1="230.2188" y2="230.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="197" y="225.4766">Create(ctx, familyDTO)</text><path d="M367,243.2188 L367,283.2188 L590,283.2188 L590,253.2188 L580,243.2188 L367,243.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M580,243.2188 L580,253.2188 L590,253.2188 L580,243.2188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="373" y="260.7871">Application service orchestrates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="373" y="276.0977">the use case and handles DTOs</text><polygon fill="#000000" points="553,306.1504,563,310.1504,553,314.1504,557,310.1504" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="362" x2="559" y1="310.1504" y2="310.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="369" y="305.4082">CreateFamily(ctx, familyDTO)</text><path d="M580,323.1504 L580,363.1504 L756,363.1504 L756,333.1504 L746,323.1504 L580,323.1504 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M746,323.1504 L746,333.1504 L756,333.1504 L746,323.1504 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="586" y="340.7188">Domain service contains</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="586" y="356.0293">business logic and rules</text><polygon fill="#000000" points="709.5,386.082,719.5,390.082,709.5,394.082,713.5,390.082" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="575" x2="715.5" y1="390.082" y2="390.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="582" y="385.3398">NewFamily(...)</text><path d="M736,403.082 L736,443.082 L917,443.082 L917,413.082 L907,403.082 L736,403.082 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M907,403.082 L907,413.082 L917,413.082 L907,403.082 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="742" y="420.6504">Family aggregate ensures</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="742" y="435.9609">internal consistency</text><polygon fill="#000000" points="586,466.0137,576,470.0137,586,474.0137,582,470.0137" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580" x2="725.5" y1="470.0137" y2="470.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="592" y="465.2715">family, nil</text><polygon fill="#000000" points="709.5,495.3242,719.5,499.3242,709.5,503.3242,713.5,499.3242" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="575" x2="715.5" y1="499.3242" y2="499.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="582" y="494.582">Validate()</text><polygon fill="#000000" points="586,524.6348,576,528.6348,586,532.6348,582,528.6348" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580" x2="725.5" y1="528.6348" y2="528.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="592" y="523.8926">nil</text><polygon fill="#000000" points="852,553.9453,862,557.9453,852,561.9453,856,557.9453" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="575" x2="858" y1="557.9453" y2="557.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="582" y="553.2031">Save(ctx, family)</text><path d="M879,570.9453 L879,610.9453 L1029,610.9453 L1029,580.9453 L1019,570.9453 L879,570.9453 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1019,570.9453 L1019,580.9453 L1029,580.9453 L1019,570.9453 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="885" y="588.5137">Repository abstracts</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="885" y="603.8242">persistence details</text><polygon fill="#000000" points="991,633.877,1001,637.877,991,641.877,995,637.877" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="874" x2="997" y1="637.877" y2="637.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="881" y="633.1348">Insert family data</text><polygon fill="#000000" points="885,663.1875,875,667.1875,885,671.1875,881,667.1875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="879" x2="1007" y1="667.1875" y2="667.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="891" y="662.4453">success</text><polygon fill="#000000" points="586,692.498,576,696.498,586,700.498,582,696.498" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580" x2="868" y1="696.498" y2="696.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="592" y="691.7559">nil</text><polygon fill="#000000" points="709.5,721.8086,719.5,725.8086,709.5,729.8086,713.5,725.8086" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="575" x2="715.5" y1="725.8086" y2="725.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="582" y="721.0664">ToDTO()</text><polygon fill="#000000" points="586,751.1191,576,755.1191,586,759.1191,582,755.1191" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580" x2="725.5" y1="755.1191" y2="755.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="592" y="750.377">familyDTO</text><polygon fill="#000000" points="373,780.4297,363,784.4297,373,788.4297,369,784.4297" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="367" x2="569" y1="784.4297" y2="784.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="379" y="779.6875">familyDTO, nil</text><polygon fill="#000000" points="201,809.7402,191,813.7402,201,817.7402,197,813.7402" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="195" x2="356" y1="813.7402" y2="813.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="207" y="808.998">familyDTO, nil</text><polygon fill="#000000" points="52,839.0508,42,843.0508,52,847.0508,48,843.0508" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="46" x2="184" y1="843.0508" y2="843.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="58" y="838.3086">family data</text><path d="M8,856.0508 L8,973.0508 L1040,973.0508 L1040,866.0508 L1030,856.0508 L8,856.0508 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1030,856.0508 L1030,866.0508 L1040,866.0508 L1030,856.0508 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="374" x="323.25" y="873.6191">This sequence diagram shows the flow of creating a family:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="323.25" y="888.9297">1. Client sends GraphQL mutation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="358" x="323.25" y="904.2402">2. Resolver converts to DTO and calls application service</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="323.25" y="919.5508">3. Application service delegates to domain service</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="384" x="323.25" y="934.8613">4. Domain service creates and validates the Family aggregate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="323.25" y="950.1719">5. Repository saves the aggregate to the database</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="393" x="323.25" y="965.4824">6. Family data is returned through the layers back to the client</text><!--SRC=[bLPBRzim3BxhLn0vTK1hOC-33mEo51iA3ElM5htBiceBLIHFafC5m_xxg8STAG-ikoGMJLAVFfAVR9-56gYXQ_XD03vHzjmPFQfsfQKsiEs5usXV6gEtqTH8zF6kshJSvBO_X3ZX98VFT2ta3kwvsGZ6uGfMXbCtssy7RgWJMX52cSFmnVBx3QoauCejW5fWuP4WB2UO6AXoiFXYwD3_-0ftt6gvuIOuchGeNUCsos6GWeLz4f0GGeSXBKy5NUir5OL_crjEXS2owmply7p1_oaOJpdUyK5RWUVT9Uo39YrrjA6Mm-8wFSLD6q8Y2N3rSJvb3Ipm6DDTODr6zyfJA3QUtPaCfVrATBq3_RGt0qmShaSNU06dKqgW4t20hN0z87xS7UbIBR1Uo1QNXEF29oTaIkhXxHcjKw4lcFjrcH9UFznc63FsIvJP2-osVUd0fYRIXlNSEcmSRj75zHn6v8rvyZp87dyaju3xsGpeFg-7MXHpGfleF8kvx80ITlaE8FRF39ffvN3j0JUZ5OfR2r9tWWN8PaJ06TOYcOSRqTJmZMyJoAggCcIfP2MakOwfFUdKdi2L7KrWJoZ7ZQBI0xJ2EgxOBWCIKy3LCMFnpIKe8KdB3u6SFy4ZbQBrdN6C_lncBzt4Jr8DztHJD5un6JXgXrE19e3zJ09jV7Snv_b1WKgqOFavbb3Qela77RgfgU56OQrTsXByE6UDqv2s2GUB2Et867P0VYO_w37TFuyV49zd-45Zr_uNlNEllu3aWp6VGuyweHo8OlmA9JkV8LE2J6OmE0fYNN1Ty9DqBbPQ-x0OSkbf1dZeXSN9_3d6iWhQ-LlFzdfhWvmyIRtrhH4KKQXkriGQWrzNwOB23AgrHrAABc-g-NBoSuL_g9-ei7Z8AADKod3_76eRnhwjJefUosKOtP2dBRG5WzvLHteJ12sgzYQDN3pSeHXW-FigRt-BunDTzuA1cth3T4bXp8TgokID8FmrvaQZU8kU-DtGzI52qXrE43JuLJ0bINVwF4L_0G00]--></g></svg>